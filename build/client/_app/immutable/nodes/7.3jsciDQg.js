import"../chunks/disclose-version.bJ1TNjgf.js";import{a as N,z as A,r as F,p as M,a3 as Se,a2 as L,v as B,w as O,x as q,a4 as K}from"../chunks/runtime.CFl1NsvJ.js";import{G as xe,z as p,h as w,H as Te,a as s,E as W,F as T,I as ie,t as J,j as S,s as d,d as y,J as ke,D as ue,B as P,c as D,f as ve,b as G,x as j,K as Y,L as je,M as Oe,N as Ae,O as pe,P as Ee,p as X,o as Z}from"../chunks/render.ghOspvTV.js";import{p as Le,i as Pe,a as Fe}from"../chunks/entry.7ZxbtElJ.js";import{e as fe}from"../chunks/each.XM42tCkC.js";import{b as Ie}from"../chunks/store.Z4QFliSE.js";var Ne=y('<button><span class="material-symbols-rounded"> </span> <span> </span></button>'),Me=y("<button> </button>"),Ve=y('<div><div class="col-auto"><!></div></div>');function ne(t,e){N(e,!0);const c=A(e,"variant",3,"primary"),i=A(e,"type",3,"button"),n=A(e,"align",3,"start");var u=S(t,!0,Ve),b=s(u),o=s(b);xe(u,()=>`row mt-4 justify-content-${W(n())}`),p(o,()=>e.icon,v=>{var l=S(v,!0,Ne),m=s(l),k=s(m),x=d(d(m,!0)),f=s(x),r;F(()=>{r!==(r=i())&&T(l,"type",r),ie(l,`d-flex align-items-center gap-3 btn btn-${W(e.outline?`outline-${c()}`:c())}`),J(k,e.icon),J(f,e.label)}),Te("click",l,function(a){Se.call(this,e,a)}),w(v,l)},v=>{var l=S(v,!0,Me),m=s(l),k;F(()=>{k!==(k=i())&&T(l,"type",k),ie(l,`btn btn-${W(e.outline?`outline-${c()}`:c())}`),J(m,e.label)}),w(v,l)}),w(t,u),M()}function He(t){const e=JSON.parse(t);return e.data&&(e.data=Le(e.data)),e}function de(t){return HTMLElement.prototype.cloneNode.call(t)}function ze(t,e=()=>{}){const c=async({action:n,result:u,reset:b=!0,invalidateAll:o=!0})=>{u.type==="success"&&(b&&HTMLFormElement.prototype.reset.call(t),o&&await Pe()),(location.origin+location.pathname===n.origin+n.pathname||u.type==="redirect"||u.type==="error")&&Fe(u)};async function i(n){var r,a,_,g;if(((r=n.submitter)!=null&&r.hasAttribute("formmethod")?n.submitter.formMethod:de(t).method)!=="post")return;n.preventDefault();const b=new URL((a=n.submitter)!=null&&a.hasAttribute("formaction")?n.submitter.formAction:de(t).action),o=new FormData(t),v=(_=n.submitter)==null?void 0:_.getAttribute("name");v&&o.append(v,((g=n.submitter)==null?void 0:g.getAttribute("value"))??"");const l=new AbortController;let m=!1;const x=await e({action:b,cancel:()=>m=!0,controller:l,formData:o,formElement:t,submitter:n.submitter})??c;if(m)return;let f;try{const h=await fetch(b,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:o,signal:l.signal});f=He(await h.text()),f.type==="error"&&(f.status=h.status)}catch(h){if((h==null?void 0:h.name)==="AbortError")return;f={type:"error",error:h}}x({action:b,formData:o,formElement:t,update:h=>c({action:b,result:f,reset:h==null?void 0:h.reset,invalidateAll:h==null?void 0:h.invalidateAll}),result:f})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",i)}}}var Ce=y("<form><!></form>");function De(t,e){N(e,!0);var c=S(t,!0,Ce),i=s(c),n,u;F(()=>{n!==(n=e.method)&&T(c,"method",n),u!==(u=e.action)&&T(c,"action",u)}),ke(c,(b,o)=>ze(b,o),()=>e.enhance),ue(()=>e.children,i),w(t,c),M()}var Ge=y("<span> </span>"),Je=y('<section><h6><span class="material-symbols-rounded"> </span> <!></h6> <!></section>');function Re(t,e){N(e,!0);var c=S(t,!0,Je),i=s(c),n=s(i),u=s(n),b=d(d(n,!0)),o=d(d(i,!0));P(u,()=>e.icon),p(b,()=>e.icon,v=>{var l=S(v,!0,Ge),m=s(l);P(m,()=>e.title),w(v,l)},null),p(o,()=>e.children,v=>{var l=ve(v),m=G(l);ue(()=>e.children,m),D(v,l)},null),w(t,c),M()}var Ue=typeof global=="object"&&global&&global.Object===Object&&global,Be=typeof self=="object"&&self&&self.Object===Object&&self,qe=Ue||Be||Function("return this")(),z=qe.Symbol,be=Object.prototype,Ke=be.hasOwnProperty,Ye=be.toString,C=z?z.toStringTag:void 0;function Qe(t){var e=Ke.call(t,C),c=t[C];try{t[C]=void 0;var i=!0}catch{}var n=Ye.call(t);return i&&(e?t[C]=c:delete t[C]),n}var We=Object.prototype,Xe=We.toString;function Ze(t){return Xe.call(t)}var $e="[object Null]",et="[object Undefined]",oe=z?z.toStringTag:void 0;function tt(t){return t==null?t===void 0?et:$e:oe&&oe in Object(t)?Qe(t):Ze(t)}function at(t){return t!=null&&typeof t=="object"}var rt="[object Symbol]";function lt(t){return typeof t=="symbol"||at(t)&&tt(t)==rt}function it(t,e){for(var c=-1,i=t==null?0:t.length,n=Array(i);++c<i;)n[c]=e(t[c],c,t);return n}var nt=Array.isArray,dt=1/0,ce=z?z.prototype:void 0,se=ce?ce.toString:void 0;function me(t){if(typeof t=="string")return t;if(nt(t))return it(t,me)+"";if(lt(t))return se?se.call(t):"";var e=t+"";return e=="0"&&1/t==-dt?"-0":e}function ot(t){return t==null?"":me(t)}var ct=0;function Q(t){var e=++ct;return ot(t)+e}var st=y('<label class="form-label d-block mb-3"> </label>'),ut=y('<div class="form-check form-check-inline"><input class="form-check-input" type="radio"> <label class="form-check-label"> </label></div>'),vt=y('<div class="form-text"> </div>'),ft=y('<div class="row"><div><!> <!></div> <div class="col-12"><!></div></div>');function bt(t,e){N(e,!0);const c=[];let i=A(e,"value",7),n=A(e,"width",3,"full"),u=A(e,"disabled",3,!1);console.log(e.options);const b=Q("radio-input-");var o=S(t,!0,ft),v=s(o),l=s(v),m=d(d(l,!0)),k=d(d(v,!0)),x=s(k);F(()=>{j(v,"col-12",n()==="full"),j(v,"col-md-8",n()==="lg"),j(v,"col-md-6",n()==="md"),j(v,"col-md-4",n()==="sm")}),p(l,()=>e.label,f=>{var r=S(f,!0,st);T(r,"for",b);var a=s(r);P(a,()=>e.label),w(f,r)},null),fe(m,()=>e.options,65,(f,r,a)=>{var _=S(f,!0,ut),g=s(_);Y(g),T(g,"id",`${b}-${L(a)}`);var h=d(d(g,!0));T(h,"for",`${b}-${L(a)}`);var V=s(h),R,E,I;F(()=>{R!==(R=L(r))&&(g.value=(g.__value=L(r))==null?"":L(r)),E!==(E=u())&&(g.disabled=E),I!==(I=e.name)&&T(g,"name",I),J(V,L(r))}),je(c,[],g,()=>(L(r),i()),U=>i(U)),w(f,_)},null),p(x,()=>e.description,f=>{var r=S(f,!0,vt),a=s(r);P(a,()=>e.description),w(f,r)},null),w(t,o),M()}var mt=y('<label class="form-label"> </label>'),_t=y("<option> </option>"),gt=y('<div class="form-text"> </div>'),yt=y('<div class="row"><div><!> <select class="form-select"></select></div> <div class="col-12"><!></div></div>');function ht(t,e){N(e,!0);let c=A(e,"value",7),i=A(e,"width",3,"md"),n=A(e,"disabled",3,!1);const u=Q("select-input-");var b=S(t,!0,yt),o=s(b),v=s(o),l=d(d(v,!0));Y(l),T(l,"id",u);var m=d(d(o,!0)),k=s(m),x,f;F(()=>{j(o,"col-12",i()==="full"),j(o,"col-md-8",i()==="lg"),j(o,"col-md-6",i()==="md"),j(o,"col-md-4",i()==="sm"),x!==(x=e.name)&&T(l,"name",x),f!==(f=n())&&(l.disabled=f)}),p(v,()=>e.label,r=>{var a=S(r,!0,mt);T(a,"for",u);var _=s(a);P(_,()=>e.label),w(r,a)},null),Oe(l,c,r=>c(r)),fe(l,()=>e.options,73,(r,a,_)=>{var g=S(r,!0,_t),h=s(g),V;F(()=>{V!==(V=L(a)[e.optionValue])&&(g.value=(g.__value=L(a)[e.optionValue])==null?"":L(a)[e.optionValue],Ae(g)),J(h,L(a)[e.optionLabel])}),w(r,g)},null),p(k,()=>e.description,r=>{var a=S(r,!0,gt),_=s(a);P(_,()=>e.description),w(r,a)},null),w(t,b),M()}var wt=y('<label class="form-label d-block"> </label>'),St=y('<label class="form-check-label"> </label>'),xt=y('<div class="row"><div><!> <div class="form-check form-switch"><input class="form-check-input" type="checkbox" role="switch"> <!></div></div></div>');function Tt(t,e){N(e,!0);let c=A(e,"checked",7),i=A(e,"width",3,"md"),n=A(e,"disabled",3,!1);const u=Q("switch-input-");var b=S(t,!0,xt),o=s(b),v=s(o),l=d(d(v,!0)),m=s(l);Y(m),T(m,"id",u);var k=d(d(m,!0)),x,f;F(()=>{j(o,"col-12",i()==="full"),j(o,"col-md-8",i()==="lg"),j(o,"col-md-6",i()==="md"),j(o,"col-md-4",i()==="sm"),x!==(x=e.name)&&T(m,"name",x),f!==(f=n())&&(m.disabled=f)}),p(v,()=>e.label,r=>{var a=S(r,!0,wt);T(a,"for",u);var _=s(a);P(_,()=>e.label),w(r,a)},null),pe(m,c,r=>c(r)),p(k,()=>e.description,r=>{var a=S(r,!0,St);T(a,"for",u);var _=s(a);P(_,()=>e.description),w(r,a)},null),w(t,b),M()}var kt=y('<label class="form-label"> </label>'),jt=y('<div class="form-text"> </div>'),Ot=y('<div class="row"><div><!> <input type="text" class="form-control"></div> <div class="col-12"><!></div></div>');function At(t,e){N(e,!0);let c=A(e,"value",7),i=A(e,"width",3,"md"),n=A(e,"disabled",3,!1);const u=Q("text-input-");var b=S(t,!0,Ot),o=s(b),v=s(o),l=d(d(v,!0));Y(l),T(l,"id",u);var m=d(d(o,!0)),k=s(m),x,f,r;F(()=>{j(o,"col-12",i()==="full"),j(o,"col-md-8",i()==="lg"),j(o,"col-md-6",i()==="md"),j(o,"col-md-4",i()==="sm"),x!==(x=e.placeholder)&&T(l,"placeholder",x),f!==(f=n())&&(l.disabled=f),r!==(r=e.name)&&T(l,"name",r)}),p(v,()=>e.label,a=>{var _=S(a,!0,kt);T(_,"for",u);var g=s(_);P(g,()=>e.label),w(a,_)},null),Ee(l,c,a=>c(a)),p(k,()=>e.description,a=>{var _=S(a,!0,jt),g=s(_);P(g,()=>e.description),w(a,_)},null),w(t,b),M()}var pt=y('<div class="note note-danger" role="alert">Something went wrong</div>'),Et=y('<div class="note note-success" role="alert">Settings saved</div>'),Lt=y("<!> <!> <!> <!> <!> <!>",!0),Pt=y("<!> <!> <!>",!0),Ft=y('<h1 class="site--title">Text to Speech</h1> <!>',!0);function Ct(t,e){var x,f,r;N(e,!0);const{user:c}=Ie.get();let i=B(!!((x=e.data.defaults)!=null&&x.enabled)),n=B(X((r=(f=e.data.defaults)==null?void 0:f.voice)==null?void 0:r.id)),u=K(()=>e.data.voices.find(a=>a.Id===O(n))),b=B(!1),o=B(!1);const v=({formData:a})=>(O(i)||(a.set("enabled","off"),a.set("channel",c.username),a.set("engine","neural")),a.set("voice",JSON.stringify(O(u))),async({result:_,update:g})=>_.type==="error"||_.type==="failure"?q(b,!0):q(o,!0));var l=Z(t,!0,Ft),m=G(l),k=d(d(m,!0));De(k,{method:"POST",enhance:v,action:"?/saveConfig",children:(a,_)=>{var g=Z(a,!0,Pt),h=G(g),V=d(d(h,!0)),R=d(d(V,!0));p(h,()=>O(b),E=>{var I=S(E,!0,pt);w(E,I)},null),p(V,()=>O(o),E=>{var I=S(E,!0,Et);w(E,I)},null),Re(R,{title:"Settings",icon:"record_voice_over",children:(E,I)=>{var U=Z(E,!0,Lt),$=G(U),ee=d(d($,!0)),_e=K(()=>!O(i)),te=d(d(ee,!0)),ge=K(()=>!O(i)),ae=d(d(te,!0)),re=d(d(ae,!0)),ye=d(d(re,!0));Tt($,{get checked(){return O(i)},set checked(H){q(i,X(H))},label:"Enable TTS",description:"Do you want to enable Text to Speech",width:"full",name:"enabled"}),At(ee,{get value(){return c.username},label:"Twitch channel",get disabled(){return O(_e)},name:"channel"}),ht(te,{label:"Voice character",description:"Select the voice character you like the most.",width:"sm",get options(){return e.data.voices},optionValue:"Id",optionLabel:"Name",get disabled(){return O(ge)},name:"voice",get value(){return O(n)},set value(H){q(n,X(H))}}),p(ae,()=>O(u),H=>{var le=ve(H),he=G(le),we=K(()=>!O(i));bt(he,{label:"Select voice type",value:"neural",get options(){return O(u).SupportedEngines},get disabled(){return O(we)},name:"engine"}),D(H,le)},null),ne(re,{variant:"secondary",label:"Test voice settings",type:"button",icon:"brand_awareness"}),ne(ye,{variant:"primary",label:"Save settings",type:"submit"}),D(E,U)}}),D(a,g)}}),D(t,l),M()}export{Ct as component};
