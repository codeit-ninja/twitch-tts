{"version":3,"file":"7-f54730f3.js","sources":["../../../.svelte-kit/adapter-node-ws/entries/pages/_/text-to-speech/_page.server.ts.js","../../../.svelte-kit/adapter-node-ws/nodes/7.js"],"sourcesContent":["import \"@aws-sdk/polly-request-presigner\";\nimport { Polly } from \"@aws-sdk/client-polly\";\nimport { p as prisma } from \"../../../../chunks/prisma.js\";\nlet client = null;\nlet voices = null;\nconst getClient = (credentials) => {\n  if (!client) {\n    client = new Polly({ region: \"us-east-1\", credentials });\n  }\n  return client;\n};\nconst getVoices = async (credentials) => {\n  if (voices) {\n    return voices;\n  }\n  const availableVoices = await getClient(credentials).describeVoices({ Engine: \"neural\" });\n  return voices = availableVoices.Voices.filter((voice) => voice.LanguageCode === \"en-GB\" || voice.LanguageCode === \"en-US\");\n};\nconst load = async ({ locals }) => {\n  const voices2 = await getVoices(locals.credentials);\n  const defaults = await prisma.ttsConfig.findFirst({ where: { userId: locals.user.userId } });\n  return {\n    voices: voices2,\n    defaults\n  };\n};\nconst actions = {\n  saveConfig: async ({ request, locals }) => {\n    const formData = await request.formData();\n    const data = {\n      voice: JSON.parse(formData.get(\"voice\")),\n      channel: formData.get(\"channel\"),\n      enabled: formData.get(\"enabled\") === \"on\",\n      engine: formData.get(\"engine\"),\n      user: {\n        connect: {\n          id: locals.user.userId\n        }\n      }\n    };\n    try {\n      const result = await prisma.ttsConfig.upsert({\n        create: data,\n        update: data,\n        where: {\n          userId: locals.user.userId\n        }\n      });\n      return {\n        success: true,\n        data: result\n      };\n    } catch (error) {\n      return {\n        success: false,\n        data,\n        error\n      };\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/_/text-to-speech/_page.server.ts.js';\n\nexport const index = 7;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/_/text-to-speech/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/_/text-to-speech/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/7.3jsciDQg.js\",\"_app/immutable/chunks/disclose-version.bJ1TNjgf.js\",\"_app/immutable/chunks/runtime.CFl1NsvJ.js\",\"_app/immutable/chunks/render.ghOspvTV.js\",\"_app/immutable/chunks/entry.7ZxbtElJ.js\",\"_app/immutable/chunks/each.XM42tCkC.js\",\"_app/immutable/chunks/store.Z4QFliSE.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}